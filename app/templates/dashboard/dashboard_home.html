{% extends "dashboard/dashboard_base.html" %}

{% block content %}
<div class="container ml-5">
  <div class="row">
    <div class="col-12">
      <span class="h2 pb-5">Dashboard</span>
    </div>
  </div>
  <div class="row">
    <div class="col-3">
      <div class="card proj-progress-card">
        <div class="card-body">
          <h6>Active Email Addresses</h6>
          <p id="emailactive"></p>
          <progress id="progress_bar" value="0" max="5"></progress>
        </div>
      </div>
    </div>
    <div class="col-9"></div>
  </div>
  <div class="row">
    <div class="col-3">
      <div class="card border-success mb-3">
        <div class="card-body text-success">
          <h6 class="m-b-25">Today Detection</h6>
          <h3 class="f-w-700 text-c-blue">1,563</h3>
          <div class="col-auto">
            <i class="fas fa-eye bg-c-blue"></i>
          </div>
          <div class="card-footer">
            <p><i id="systime" class="lni lni-alarm-clock"></i> Updated</p>
          </div>
        </div>
      </div>
    </div>
    <div class="col-3">
      <div class="card border-info mb-3">
        <div class="card-body text-info">
          <h6 class="m-b-25">Weekly Detection</h6>
          <h3 class="f-w-700 text-c-green">30,564</h3>
          <i class="fas fa-bullseye bg-c-green"></i>
          <div class="card-footer">
            <p id="weekly-updated"><i class="lni lni-alarm-clock"></i> Updated</p>
          </div>
        </div>
      </div>
    </div>
    <div class="col-3">
      <div class="card border-dark mb-3">
        <div class="card-body text-dark">
          <h6 class="m-b-25">Monthly Detection</h6>
          <h3 class="f-w-700 text-c-green">30,564</h3>
          <div class="col-auto">
            <i class="fas fa-bullseye bg-c-green"></i>
          </div>
          <div class="card-footer">
            <p><i id="systime" class="lni lni-alarm-clock"></i> Updated</p>
          </div>
        </div>
      </div>
    </div>
    <div class="col-3 ">
      <div class="card bg-c-yellow update-card">
        <div class="card-body">
          <h6 class="m-b-25">All Time Detection</h6>
          <h3 class="f-w-700 text-c-green">30,564</h3>
          <div class="col-auto">
            <i class="fas fa-bullseye bg-c-green"></i>
          </div>
          <div class="card-footer">
            <p><i class="lni lni-alarm-clock"></i> Update : 2:15 am</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header bg-transparent">
          <div class="row align-items-center">
            <div class="col">
              <h6 class="text-uppercase text-muted ls-1 mb-1">Monthly Overview</h6>
            </div>
          </div>
        </div>
        <div class="card-body">
          <div class="chart-area">
            <canvas id="myChart" class="chart-canvas" width="1000" height="400"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
<script>
  var ctx = document.getElementById("myChart");

  <!--values (y-axis) to be updated here//-->
  var emailsD = [9, 12, 18, 3, 15, 12, 4, 5, 9, 11, 19, 12];

  <!--values (x-axis) to be updated here//-->
  var dates = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

  var myChart = new Chart(ctx, {
    type: "bar",
    data: {
      labels: dates,
      datasets: [
      {
        label: "Total Number of Phishing Emails per Month",
        data: emailsD,
        backgroundColor: [
        'rgba(255, 99, 132, 0.2)',
        'rgba(54, 162, 235, 0.2)',
        'rgba(255, 206, 86, 0.2)',
        'rgba(75, 192, 192, 0.2)',
        'rgba(153, 102, 255, 0.2)',
        'rgba(255, 159, 64, 0.2)',
        'rgba(255, 99, 132, 0.2)',
        'rgba(54, 162, 235, 0.2)',
        'rgba(255, 206, 86, 0.2)',
        'rgba(75, 192, 192, 0.2)',
        'rgba(153, 102, 255, 0.2)',
        'rgba(255, 159, 64, 0.2)'
        ],
        borderColor:  [
        'rgba(255,99,132,1)',
        'rgba(54, 162, 235, 1)',
        'rgba(255, 206, 86, 1)',
        'rgba(75, 192, 192, 1)',
        'rgba(153, 102, 255, 1)',
        'rgba(255, 159, 64, 1)',
        'rgba(255,99,132,1)',
        'rgba(54, 162, 235, 1)',
        'rgba(255, 206, 86, 1)',
        'rgba(75, 192, 192, 1)',
        'rgba(153, 102, 255, 1)',
        'rgba(255, 159, 64, 1)'
        ],
        borderWidth: 2,
        barThickness: 6,
        maxBarThickness: 8,
        minBarLength: 4,
      }
      ]
    }
  });

  // System Time
  var today = new Date();
  var time = today.getHours() + ":" + today.getMinutes();
  document.getElementById("systime").innerHTML = time;
  document.getElementById("a").innerHTML += time;

  function loadTime(ele) {
    document.getElementById(ele).innerHTML += time
  }

  // Active Email Addresses display
  var email_active = {{ email_active }}
  var email_stats =  {{ email_stats }}
  document.getElementById("emailactive").innerHTML = email_active;
  // ele = document.getElementById
  document.getElementById("progress_bar").value = email_active;
  document.getElementById("progress_bar").innerHTML = email_stats;
  // document.getElementById("progress_bar").max = 5;

</script>
{% endblock %}
